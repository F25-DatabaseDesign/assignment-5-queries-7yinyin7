-- 1. How many containers of antibiotics are currently available?
SELECT quantityOnHand 
FROM item 
WHERE itemDescription LIKE '%antibiotic%';
Answer: 100

-- 2. Which volunteer(s), if any, have phone numbers that do not start with the number 2 and whose last name is not Jones. 
SELECT volunteerName,volunteerTelephone
FROM volunteer
WHERE volunteerTelephone NOT LIKE '2%' AND
volunteerName NOT LIKE '% Jones';
Answer: Gene Lewin: 9174528888

-- 3. Which volunteers are working on transporting tasks?
SELECT volunteer
FROM volunteertask
WHERE taskType = 'transporting';
Answer: George Brewer

-- 4. What tasks have yet to be assigned to any volunteers?
SELECT t.taskDescription
FROM task AS t
LEFT JOIN assignment AS a ON a.taskCode = t.taskCode
WHERE a.taskCode IS NULL;
Answer: prepare 100 food packages, take packages to the warehouse

-- 5. What types of package contains some type of bottle?
SELECT pt.packageTypeName
FROM package_type AS pt
JOIN package AS p ON p.packageTypeId = pt.packageTypeId
JOIN package_contents AS pc ON pc.packageId = p.packageId
JOIN item AS i ON i.itemId = pc.itemId
WHERE i.itemDescription LIKE '%bottle%';
Answer: food and water 5 times
 
-- 6. Which items are not in any packages? Answer should be item descriptions.
SELECT i.itemDescription
FROM item as i
LEFT JOIN package_contents as pc ON pc.itemId = i.itemId
WHERE pc.itemId IS NULL;
Answer: bottle of antibiotics, bottle of aspiriin, flashlight, pack of bandages

-- 7. Which tasks are assigned to volunteers that live in New Jersey? Answer should have the task description.
SELECT DISTINCT t.taskDescription
FROM volunteer AS v
JOIN assignment AS a ON a.volunteerId = v.volunteerId
JOIN task AS t ON t.taskCode = a.taskCode
WHERE v.volunteerAddress LIKE '% NJ%';
Answer: Prepare 20 children's packages, prepare 100 water packages, prepare 5000 packages

-- 8. Which volunteers began their assignments in the first half of 2021? Answer should have the volunteer names.
SELECT volunteerName
FROM volunteer as v
JOIN assignment as a ON a.volunteerId = v.volunteerId
WHERE a.startDateTime >= '2021-01-01'
  AND a.startDateTime <  '2021-07-01';
Answer: Joan Simmons, Chris Jordan

-- 9. Which volunteers have been assigned to tasks that include packing spam? Answer should have the volunteer names.
SELECT DISTINCT v.volunteerName
FROM volunteer v
JOIN assignment a ON a.volunteerId = v.volunteerId
JOIN package p ON p.taskCode = a.taskCode
JOIN package_contents pc ON pc.packageId = p.packageId
JOIN item i ON i.itemId = pc.itemId
WHERE i.itemDescription LIKE '%spam%';
Answer: Julie White, Gerry Banks

-- 10. Which items have a total value of exactly $100 in one package? Answer should be item descriptions.
SELECT i.itemDescription
FROM package_contents AS pc
JOIN item AS i ON i.itemId = pc.itemId
WHERE pc.itemQuantity * i.itemValue = 100;
Answer: baby formula

-- 11. How many volunteers are assigned to tasks with each different status? The answer should show each different status and the number of volunteers sorted from highest to lowest
SELECT taskStatus, COUNT(volunteer) as numVolunteers
FROM volunteertask
GROUP BY taskStatus
ORDER BY numVolunteers DESC;
Answer: {open: 4, closed: 4, ongoing: 2, null:2, pending:1}

-- 12. Which task creates the heaviest set of packages and what is the weight? Show both the taskCode and the weight.
SELECT taskCode, SUM(packageWeight) as totalWeight
FROM package
GROUP BY taskCode
ORDER BY totalWeight DESC
LIMIT 1;
Answer: 106:308

-- 13. How many tasks are there that do not have a type of "packing"?
SELECT COUNT(*) as tasksNotPacking
FROM task t
JOIN task_type tt ON tt.taskTypeId = t.taskTypeId
WHERE tt.taskTypeName != 'packing';
Answer: 3

-- 14. Of those items that have been packed, which item was touched by fewer than 3 volunteers? Answer should be item descriptions.
SELECT i.itemDescription
FROM item             AS i
JOIN package_contents AS pc ON pc.itemId   = i.itemId
JOIN package          AS p  ON p.packageId = pc.packageId
JOIN task             AS t  ON t.taskCode  = p.taskCode
JOIN assignment       AS a  ON a.taskCode  = t.taskCode
GROUP BY i.itemDescription
HAVING COUNT(DISTINCT a.volunteerId) < 3;
Answer: can of spam, dried fruit, men's coat, sleeping bag, tent, women's coat

-- 15. Which packages have a total value of more than 100? Show the packagelds and their value sorted from lowest to highest.
SELECT pc.packageId, SUM(pc.itemQuantity * i.itemValue) AS totalValue
FROM package_contents pc
JOIN item i ON i.itemId = pc.itemId
GROUP BY pc.packageId
HAVING totalValue > 100
ORDER BY totalValue;
Answer: {2: 151, 4:350, 10:750,5:1420}
:wq
